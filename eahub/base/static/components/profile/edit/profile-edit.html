<div class="profile-edit-tags mt-5 mb-5">

  <ais-instant-search
      :search-client="searchClient"
      :index-name="algoliaIndex"
  >
    <h4 class="mb-3">{{ typeLabel }}</h4>
    
    <div class="tags__input">
      <div class="tags__selected">
        <div
          class="tags__tag"
          v-for="tag of tagsSelected"
        >
          {{ tag.name }}
          <button
              type="button"
              class="btn-close"
              aria-label="Close"
              v-on:click="remove(tag.pk)"
          ></button>
        </div>
      </div>
      <ais-search-box
          v-model="searchQuery"
          v-on:input="processTagSearchInput($event)"
          :placeholder="'Add a new tag...'"
      />
    </div>

    <ais-refinement-list
        attribute="types"
        ref="typesRef"
    />

    <ais-state-results>
      <div slot-scope="{ state: { query }, results: { hits } }">
        <ais-infinite-hits>
          <div class="row row-cols-3" slot-scope="{ items }">
            <div class="col tag"
                v-for="item of items"
                :key="item.objectID"
                :class="{selected: isSelected(item.objectID)}"
                v-on:click="add(item)"
            >
              <div class="tag__name">
                <ais-highlight :hit="item" attribute="name"/> 
              </div>
              <span class="tag__count" v-if="item.count">{{item.count}}</span>
              <div class="tag__desc"><ais-highlight :hit="item" attribute="description"/></div>
            </div>
          </div>
        </ais-infinite-hits>
      </div>
    </ais-state-results>
  </ais-instant-search>
</div>
